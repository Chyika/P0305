(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51f7e3c6"],{"077d":function(e,t,i){"use strict";var a=i("db96"),s=i.n(a);s.a},3072:function(e,t,i){"use strict";var a=i("fb66"),s=i.n(a);s.a},db96:function(e,t,i){},e74d:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"container-fluid container_access w-100"},[a("vue-headful",{attrs:{title:"Управление персоналом"}}),a("div",{staticClass:"panel_line"},[a("h3",[t._v("Персонал")]),a("div",{staticClass:"right ml-auto"},[a("search",{on:{input:function(t){return e.search=t}}}),a("a",{staticClass:"button-1 ml-30",attrs:{id:"add_new_host",href:"/home"},on:{click:function(e){e.preventDefault(),t.isVisibilityFormAddPersonal=!t.isVisibilityFormAddPersonal}}},[t._v("Добавить")])],1)]),a("personal-table",{ref:"table",attrs:{search:t.search}}),a("form-add-personal-modal",{attrs:{isVisibility:t.isVisibilityFormAddPersonal},on:{close:function(e){t.isVisibilityFormAddPersonal=!1}}}),a("form-edit-personal-modal",{attrs:{isVisibility:t.isVisibilityFormEditPersonal},on:{close:function(e){t.isVisibilityFormEditPersonal=!1}}})],1)},s=[],r=i("ec02"),n=i.n(r),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"table_access"},[i("table",[e._m(0),i("tbody",[e._l(e.accessesDataTable,(function(e,t){return i("row",{key:t,attrs:{row:e,id:t}})})),i("tr",[e.GET_IS_LOAD_PERSONAL?i("loader"):e._e()],1)],2)]),e.GET_IS_LOAD_PERSONAL||0!==e.GET_ALL_PERSONAL.length?e._e():i("div",{staticClass:"table_access__empty"},[e._v("Записи в таблице отсутствуют.")])])])},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("th",[e._v("Имя пользователя")]),i("th",[e._v("Почта")]),i("th",[e._v("Привелегия")]),i("th")])}],c=(i("4de4"),i("c975"),i("b0c0"),i("ac1f"),i("841c"),i("5530")),_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("tr",[e._l(e.filteredCells(e.row),(function(e,t){return i("cell",{key:t,attrs:{value:e,name:t}})})),i("td",{staticStyle:{position:"relative"},on:{mouseover:e.handleOverActionCell,mouseleave:e.handleLeaveActionCell}},[e.isContextVisibility?i("div",{staticClass:"context_menu",on:{mouseover:function(t){e.isContextVisibility=!0},mouseleave:function(t){e.isContextVisibility=!1}}},[i("a",{attrs:{hcontext_menuref:"/"},on:{click:function(t){return t.preventDefault(),e.startEdit(t)}}},[e._v(" Изменить ")]),i("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.handleDestroy(t)}}},[e._v("Удалить")]),i("span",{staticClass:"left"})]):e._e()])],2)},u=[],d=i("46d5"),m=i("bb45"),v=i("2f62"),p={name:"PersonalRow",data:function(){return{isContextVisibility:!1,isVisibilityFormEditPersonal:!1}},computed:{routeShow:function(){return Object(m["a"])("dashboard.personal.show",[this.row.id])}},props:["row"],methods:Object(c["a"])(Object(c["a"])({},Object(v["b"])(["START_CONFIRM_FORM","START_PERSONAL_EDIT_FORM","DESTROY_PERSONAL_BY_ID"])),{},{handleDestroy:function(){var e=this;this.START_CONFIRM_FORM((function(){return e.DESTROY_PERSONAL_BY_ID(e.row.id)})),this.isContextVisibility=!1},handleOverActionCell:function(){this.isContextVisibility=!0},handleLeaveActionCell:function(){this.isContextVisibility=!1},filteredCells:function(e){return{name:e.name,email:e.email,privilege:"worker"===e.privilege?"Рабочий":"Администратор"}},setCurrentCellHover:function(e,t){this.cellHoverIndex=[e,t]},startEdit:function(){this.START_PERSONAL_EDIT_FORM(this.row.id)}}),components:{Cell:d["a"]}},f=p,E=i("2877"),h=Object(E["a"])(f,_,u,!1,null,"5d54d147",null),b=h.exports,O=i("a2d4"),I={name:"PersonalTable",data:function(){return{dataTablePersonal:[],activeCell:null,activeCellIndex:null,cellHoverIndex:null,isVisibilityConfirmForm:!1,confirmStatus:null,confirmID:null}},props:["search"],mounted:function(){this.GET_ALL_PERSONAL_FROM_API()},methods:Object(c["a"])(Object(c["a"])({},Object(v["b"])(["GET_ALL_PERSONAL_FROM_API"])),{},{scrollHanle:function(e){console.log(e)},handleConfirmResponse:function(e){this.isVisibilityConfirmForm=!1,e&&this.Destroy(this.confirmID),this.confirmStatus=null,this.confirmID=null},handleConfirm:function(e){this.confirmStatus=null,this.confirmID=e,this.isVisibilityConfirmForm=!0},isCurrentCellHover:function(e,t){return!(null===this.cellHoverIndex||this.cellHoverIndex[0]!==e||this.cellHoverIndex[1]!==t)},isCurrentCellActive:function(e,t){return!(null===this.cellActiveIndex||this.cellActiveIndex[0]!==e||this.cellActiveIndex[1]!==t)}}),computed:Object(c["a"])(Object(c["a"])({},Object(v["c"])(["GET_ALL_PERSONAL","GET_IS_LOAD_PERSONAL"])),{},{accessesDataTable:function(){var e=[],t=this.search.toLowerCase();return this.GET_ALL_PERSONAL.filter((function(i){var a=i;(a.name&&-1!==a.name.toLowerCase().indexOf(t)||a.email&&-1!==a.email.toLowerCase().indexOf(t)||a.privilege&&-1!==a.privilege.toLowerCase().indexOf(t))&&e.push(a)})),e}}),components:{Row:b,Loader:O["a"]}},R=I,S=Object(E["a"])(R,l,o,!1,null,"bb474636",null),T=S.exports,C=i("c106"),L=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"modal"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isVisibility,expression:"isVisibility"}],staticClass:"modal_container"},[i("transition",{attrs:{name:"modal_form"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isVisibility,expression:"isVisibility"}],staticClass:"modal_form",staticStyle:{"min-height":"355px"}},[i("div",{staticClass:"modal_header"},[i("h3",[e._v("Форма добавления")]),i("div",{staticClass:"modal_close",on:{click:function(t){return t.preventDefault(),e.handleClose(t)}}})]),i("div",{staticClass:"modal_content"},[i("form",{ref:"form_add_host",staticClass:"row",attrs:{action:""},on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"col-12 d-flex flex-column"},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"form_control_input_and_label col-6",class:{error:e.$v.name.$error}},[i("label",{attrs:{for:"input_name"}},[e._v("Имя пользователя:")]),i("div",{staticClass:"form_control_container_input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"control_input",class:{error:e.$v.name.$error},attrs:{id:"input_name",type:"text"},domProps:{value:e.name},on:{change:function(t){return e.$v.name.$touch()},input:function(t){t.target.composing||(e.name=t.target.value)}}}),e.$v.name.required?e._e():i("div",{staticClass:"error_notice",attrs:{tooltip:"Это поле обязательно для заполнения"}})])]),i("div",{staticClass:"col-6 d-flex flex-column"},[i("div",{staticClass:"form_control_input_and_label"},[i("label",[e._v("Привилегия")]),i("div",{staticClass:"form_control_container_input"},[i("multiselect",{attrs:{"track-by":"name",label:"label",options:e.GET_PRIVILEGES,selectLabel:"Выбрать",deselectLabel:"",selectedLabel:"",placeholder:"Выберите привилегию","allow-empty":!1},scopedSlots:e._u([{key:"noResult",fn:function(){return[e._v(" Не найдено ")]},proxy:!0}]),model:{value:e.privilege,callback:function(t){e.privilege=t},expression:"privilege"}})],1)])])]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"form_control_input_and_label col-6",class:{error:e.$v.email.$error}},[i("label",{attrs:{for:"input_email"}},[e._v("Почта:")]),i("div",{staticClass:"form_control_container_input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"control_input",class:{error:e.$v.email.$error},attrs:{id:"input_email",type:"text",placeholder:"youremail@mail.ru"},domProps:{value:e.email},on:{change:function(t){return e.$v.email.$touch()},input:function(t){t.target.composing||(e.email=t.target.value)}}}),e.$v.email.required?e._e():i("div",{staticClass:"error_notice",attrs:{tooltip:"Это поле обязательно для заполнения"}}),e.$v.email.email?e._e():i("div",{staticClass:"error_notice",attrs:{tooltip:"Почта указана не верно"}})])]),i("div",{staticClass:"form_control_input_and_label col-6",class:{error:e.$v.password.$error}},[i("label",{attrs:{for:"input_password"}},[e._v("Пароль:")]),i("div",{staticClass:"form_control_container_input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"control_input",class:{error:e.$v.password.$error},attrs:{id:"input_password",type:"text"},domProps:{value:e.password},on:{change:function(t){return e.$v.password.$touch()},input:function(t){t.target.composing||(e.password=t.target.value)}}}),e.$v.password.required?e._e():i("div",{staticClass:"error_notice",attrs:{tooltip:"Это поле обязательно для заполнения"}})])])]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"col-6"}),i("div",{staticClass:"col-6 form_control_input_and_label"},[i("button",{staticClass:"button-1 mt-30",attrs:{type:"submit",disabled:"PENDING"===e.submit_status}},[e._v("Сохранить ")])])])])])])])]),i("transition",{attrs:{name:"overlay"}},[e.isVisibility?i("div",{staticClass:"overlay_bg",on:{click:e.handleClose}}):e._e()])],1)])},A=[],P=i("b5ae"),D={name:"FormAddPersonal",data:function(){return{name:"",email:"",privilege:"",password:"",submit_status:null}},computed:{GET_PRIVILEGES:function(){return[{name:"administrator",label:"Администатор"},{name:"worker",label:"Рабочий"}]}},props:["isVisibility"],mounted:function(){this.privilege={name:"worker",label:"Рабочий"}},methods:Object(c["a"])(Object(c["a"])({},Object(v["b"])(["ADD_PERSONAL"])),{},{handleClose:function(){this.$emit("close")},handleSubmit:function(){var e=this;if(this.$v.$touch(),this.$v.$invalid)this.submit_status="ERROR";else{this.submit_status="PENDING";var t=new FormData;t.append("name",this.name),t.append("email",this.email),t.append("password",this.password),t.append("privilege",this.privilege.name),this.ADD_PERSONAL(t).then((function(t){e.submit_status="OK",e.handleClose(),e.clearForm()})).catch((function(t){e.submit_status="ERROR",window.newToast("Возникла ошибка","error",3)}))}},clearForm:function(){this.name="",this.email="",this.password="",this.privilege={name:"worker",label:"Рабочий"},this.$v.$reset()}}),validations:{name:{required:P["required"]},email:{required:P["required"],email:P["email"]},privilege:{required:P["required"]},password:{required:P["required"]}}},w=D,N=(i("077d"),Object(E["a"])(w,L,A,!1,null,"2541bbf8",null)),x=N.exports,y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"modal"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.GET_IS_VISIBILITY_PERSONAL_EDIT_FORM,expression:"GET_IS_VISIBILITY_PERSONAL_EDIT_FORM"}],staticClass:"modal_container"},[i("transition",{attrs:{name:"modal_form"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.GET_IS_VISIBILITY_PERSONAL_EDIT_FORM,expression:"GET_IS_VISIBILITY_PERSONAL_EDIT_FORM"}],staticClass:"modal_form",staticStyle:{"min-height":"355px"}},[i("div",{staticClass:"modal_header"},[i("h3",[e._v("Форма редактирования")]),i("div",{staticClass:"modal_close",on:{click:function(t){return t.preventDefault(),e.CLOSE_PERSONAL_EDIT_FORM(t)}}})]),i("div",{staticClass:"modal_content"},[i("form",{ref:"form_add_host",staticClass:"row",attrs:{action:""},on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("div",{staticClass:"col-12 d-flex flex-column"},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"form_control_input_and_label col-6",class:{error:e.$v.username.$error}},[i("label",{attrs:{for:"form_edit_personal_input_username"}},[e._v("Имя пользователя:")]),i("div",{staticClass:"form_control_container_input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"control_input",class:{error:e.$v.username.$error},attrs:{id:"form_edit_personal_input_username",type:"text"},domProps:{value:e.username},on:{change:function(t){return e.$v.username.$touch()},input:function(t){t.target.composing||(e.username=t.target.value)}}}),e.$v.username.required?e._e():i("div",{staticClass:"error_notice",attrs:{tooltip:"Это поле обязательно для заполнения"}})])]),i("div",{staticClass:"col-6 d-flex flex-column"},[i("div",{staticClass:"form_control_input_and_label"},[i("label",[e._v("Привилегия")]),i("div",{staticClass:"form_control_container_input"},[i("multiselect",{attrs:{"track-by":"name",label:"label",value:"name",options:e.GET_LIST_PRIVILEGES_PERSONAL_EDIT_FORM,selectLabel:"Выбрать",deselectLabel:"",selectedLabel:"",placeholder:"Выберите привилегию","allow-empty":!1},scopedSlots:e._u([{key:"noResult",fn:function(){return[e._v(" Не найдено ")]},proxy:!0}]),model:{value:e.privilege,callback:function(t){e.privilege=t},expression:"privilege"}})],1)])])]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"form_control_input_and_label col-6",class:{error:e.$v.email.$error}},[i("label",{attrs:{for:"form_edit_personal_input_email"}},[e._v("Почта:")]),i("div",{staticClass:"form_control_container_input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"control_input",class:{error:e.$v.email.$error},attrs:{id:"form_edit_personal_input_email",type:"text",placeholder:"youremail@mail.ru"},domProps:{value:e.email},on:{change:function(t){return e.$v.email.$touch()},input:function(t){t.target.composing||(e.email=t.target.value)}}}),e.$v.email.required?e._e():i("div",{staticClass:"error_notice",attrs:{tooltip:"Это поле обязательно для заполнения"}}),e.$v.email.email?e._e():i("div",{staticClass:"error_notice",attrs:{tooltip:"Почта указана не верно"}})])])]),i("div",{staticClass:"d-flex"},[i("div",{staticClass:"col-6"}),i("div",{staticClass:"col-6 form_control_input_and_label"},[i("button",{staticClass:"button-1 mt-30",attrs:{type:"submit",disabled:"PENDING"===e.GET_SUBMIT_STATUS_PERSONAL_EDIT_FORM}},[e._v("Сохранить ")])])])])])])])]),i("transition",{attrs:{name:"overlay"}},[e.GET_IS_VISIBILITY_PERSONAL_EDIT_FORM?i("div",{staticClass:"overlay_bg",on:{click:e.CLOSE_PERSONAL_EDIT_FORM}}):e._e()])],1)])},F=[],$={name:"FormEditPersonal",computed:Object(c["a"])(Object(c["a"])({},Object(v["c"])(["GET_IS_VISIBILITY_PERSONAL_EDIT_FORM","GET_SUBMIT_STATUS_PERSONAL_EDIT_FORM","GET_LIST_PRIVILEGES_PERSONAL_EDIT_FORM","GET_USERNAME_PERSONAL_EDIT_FORM","GET_EMAIL_PERSONAL_EDIT_FORM","GET_PRIVILEGE_PERSONAL_EDIT_FORM","GET_LIST_PRIVILEGES_PERSONAL_EDIT_FORM"])),{},{username:{get:function(){return this.GET_USERNAME_PERSONAL_EDIT_FORM},set:function(e){this.UPDATE_USERNAME_PERSONAL_EDIT_FORM(e)}},email:{get:function(){return this.GET_EMAIL_PERSONAL_EDIT_FORM},set:function(e){this.UPDATE_EMAIL_PERSONAL_EDIT_FORM(e)}},privilege:{get:function(){return this.GET_PRIVILEGE_PERSONAL_EDIT_FORM},set:function(e){this.UPDATE_PRIVILEGE_PERSONAL_EDIT_FORM(e)}}}),methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(v["b"])(["CLOSE_PERSONAL_EDIT_FORM","SUBMIT_PERSONAL_EDIT_FORM"])),Object(v["d"])(["UPDATE_USERNAME_PERSONAL_EDIT_FORM","UPDATE_EMAIL_PERSONAL_EDIT_FORM","UPDATE_PRIVILEGE_PERSONAL_EDIT_FORM","UPDATE_SUBMIT_STATUS_PERSONAL_EDIT_FORM"])),{},{handleSubmit:function(){var e=this;this.$v.$touch(),this.$v.$invalid?this.UPDATE_SUBMIT_STATUS_PERSONAL_EDIT_FORM("ERROR"):this.SUBMIT_PERSONAL_EDIT_FORM().then((function(t){e.$v.$reset()}))}}),validations:{username:{required:P["required"]},email:{required:P["required"],email:P["email"]},privilege:{required:P["required"]}}},M=$,g=(i("3072"),Object(E["a"])(M,y,F,!1,null,"3e1139e4",null)),V=g.exports,G={name:"PersonalIndex",data:function(){return{search:"",isVisibilityFormAddPersonal:!1,isVisibilityFormEditPersonal:!1,host:"",options:["jino","nic","reg"],selectLabel:""}},components:{PersonalTable:T,Search:C["a"],VueHeadful:n.a,FormAddPersonalModal:x,FormEditPersonalModal:V},methods:{}},j=G,k=Object(E["a"])(j,a,s,!1,null,"73e47ada",null);t["default"]=k.exports},fb66:function(e,t,i){}}]);
//# sourceMappingURL=chunk-51f7e3c6.3340ff67.js.map